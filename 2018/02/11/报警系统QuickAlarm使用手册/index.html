<!DOCTYPE html><html lang="zh-CN"><head><meta name="google-site-verification" content="PR6S72-htn-N1oDn9ENMcwi5niLKk0uebDzmRS-oivs"><meta property="wb:webmaster" content="320520520031fedd"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="好好学习，努力搬砖，天天吃草"><title>6. 报警系统QuickAlarm使用手册 | 一灰灰Blog</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/hexblog/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/hexblog/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/hexblog/favicon.ico"><link rel="bookmark" href="/hexblog/favicon.ico"><link rel="apple-touch-icon" href="/hexblog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/hexblog/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">6. 报警系统QuickAlarm使用手册</h1><a id="logo" href="/hexblog/.">一灰灰Blog</a><p style="font-size:18px" class="description">一灰灰的个人博客网站</p></div><div id="nav-menu"><a href="/hexblog/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/hexblog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/hexblog/about/"><i class="fa fa-user"> 关于</i></a><a href="https://zbang.online/webs"><i class="fa fa-rss"> 网站</i></a></div>
<div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="blog"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/hexblog/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">6. 报警系统QuickAlarm使用手册 <span style="font-size:14px;color:#40759b;font-style:italic;border-bottom: 1px solid #e5e5e5;">&gt;&gt;&gt; by 一灰灰Blog</span></h1><div class="post-meta"><a href="/hexblog/2018/02/11/报警系统QuickAlarm使用手册/#saveImg" class="saveImg-icon"></a><a href="/hexblog/2018/02/11/报警系统QuickAlarm使用手册/#comments" class="comment-count"></a><p><span class="date">Feb 11, 2018</span><span><a href="/hexblog/categories/Quick系列项目/" class="category">Quick系列项目</a><a href="/hexblog/categories/Quick系列项目/QuickAlarm/" class="category">QuickAlarm</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>本文将主要说明QuickAlarm该如何使用，以及使用时需要注意事项</p>
<h2 id="1-基本使用姿势"><a href="#1-基本使用姿势" class="headerlink" title="1. 基本使用姿势"></a>1. 基本使用姿势</h2><p>首先我们不做任何的自定义操作，全部依靠系统默认的实现，我们的使用步骤如下</p>
<h3 id="1-添加注册文件"><a href="#1-添加注册文件" class="headerlink" title="1. 添加注册文件"></a>1. 添加注册文件</h3><p>首先在项目的资源目录下，添加注册文件 <code>alarm.properties</code>，文件内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">## 应用名，必填</span><br><span class="line">appName=test</span><br><span class="line"></span><br><span class="line">## 报警规则文件所在的路径，如果采用系统默认加载方式，必填</span><br><span class="line">## / 开头，表示存的是绝对路径</span><br><span class="line">## 非/开头，表示存的是系统相对路径，一般是放在资源目录下</span><br><span class="line">alarmConfPath=/tmp/alarmConfig</span><br><span class="line"></span><br><span class="line">## 最大的报警类型，非必填</span><br><span class="line">maxAlarmType=1000</span><br><span class="line"></span><br><span class="line">## 默认报警用户，必填</span><br><span class="line">defaultAlarmUsers=yihui</span><br></pre></td></tr></table></figure>
<p>具体存放的位置，可以参考下图，放在resources目录下（源码中，是放在测试资源目录下的）</p>
<p><img src="https://s3.mogucdn.com/mlcdn/c45406/180211_19i0ckjaic6f22i7hlai52ja471gc_1988x1178.jpg" alt="IMAGE"></p>
<h3 id="2-添加报警规则"><a href="#2-添加报警规则" class="headerlink" title="2. 添加报警规则"></a>2. 添加报警规则</h3><p>根据注册文件中指定的路径，设置报警规则文件，如我们的报警规则文件</p>
<p>内容为json串格式，支持格式化的json串解析，为了节省篇幅，下面压缩成一行，点击获取<a href="https://github.com/liuyueyi/PopClip#4-json" target="_blank" rel="noopener">json格式化小工具</a></p>
<p><strong>/tmp/alarmConig:</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"default"</span>:&#123;<span class="attr">"level"</span>:<span class="string">"LOG"</span>,<span class="attr">"autoIncEmergency"</span>:<span class="literal">true</span>,<span class="attr">"max"</span>:<span class="number">30</span>,<span class="attr">"min"</span>:<span class="number">3</span>,<span class="attr">"threshold"</span>:[&#123;<span class="attr">"level"</span>:<span class="string">"SMS"</span>,<span class="attr">"threshold"</span>:<span class="number">20</span>,<span class="attr">"users"</span>:[<span class="string">"345345345345"</span>,<span class="string">"123123123123"</span>]&#125;,&#123;<span class="attr">"level"</span>:<span class="string">"WEIXIN"</span>,<span class="attr">"threshold"</span>:<span class="number">10</span>,<span class="attr">"users"</span>:[<span class="string">"yihui"</span>,<span class="string">"erhui"</span>]&#125;,&#123;<span class="attr">"level"</span>:<span class="string">"LOG"</span>,<span class="attr">"threshold"</span>:<span class="number">5</span>,<span class="attr">"users"</span>:[<span class="string">"yihui"</span>,<span class="string">"erhui"</span>]&#125;],<span class="attr">"users"</span>:[<span class="string">"yihui"</span>]&#125;,<span class="attr">"NPE"</span>:&#123;<span class="attr">"level"</span>:<span class="string">"WEIXIN"</span>,<span class="attr">"autoIncEmergency"</span>:<span class="literal">false</span>,<span class="attr">"max"</span>:<span class="number">30</span>,<span class="attr">"min"</span>:<span class="number">0</span>,<span class="attr">"threshold"</span>:[&#123;<span class="attr">"level"</span>:<span class="string">"SMS"</span>,<span class="attr">"threshold"</span>:<span class="number">20</span>,<span class="attr">"users"</span>:[<span class="string">"345345345345"</span>,<span class="string">"123123123123"</span>]&#125;,&#123;<span class="attr">"level"</span>:<span class="string">"WEIXIN"</span>,<span class="attr">"threshold"</span>:<span class="number">10</span>,<span class="attr">"users"</span>:[<span class="string">"3h    ui"</span>,<span class="string">"4hui"</span>]&#125;],<span class="attr">"users"</span>:[<span class="string">"yihui"</span>]&#125;,<span class="attr">"XXX,YYY"</span>:&#123;<span class="attr">"level"</span>:<span class="string">"EMAIL"</span>,<span class="attr">"autoIncEmergency"</span>:<span class="literal">true</span>,<span class="attr">"max"</span>:<span class="number">30</span>,<span class="attr">"min"</span>:<span class="number">3</span>,<span class="attr">"threshold"</span>:[&#123;<span class="attr">"level"</span>:<span class="string">"SMS"</span>,<span class="attr">"threshold"</span>:<span class="number">20</span>,<span class="attr">"users"</span>:[<span class="string">"345345345345"</span>,<span class="string">"123123123123"</span>]&#125;,&#123;<span class="attr">"level"</span>:<span class="string">"WEIXIN"</span>,<span class="attr">"threshold"</span>:<span class="number">10</span>,<span class="attr">"users"</span>:[<span class="string">"yihui"</span>,<span class="string">"erhui"</span>]&#125;,&#123;<span class="attr">"level"</span>:<span class="string">"EMAIL"</span>,<span class="attr">"threshold"</span>:<span class="number">5</span>,<span class="attr">"users"</span>:[<span class="string">"yihui@xxx.com"</span>,<span class="string">"erhui@xxx.com"</span>]&#125;],<span class="attr">"users"</span>:[<span class="string">"yihui@xxx.com"</span>]&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-测试类"><a href="#3-测试类" class="headerlink" title="3. 测试类"></a>3. 测试类</h3><p>一个简单的使用测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMsg</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    String key = <span class="string">"NPE"</span>;</span><br><span class="line">    String title = <span class="string">"NPE异常"</span>;</span><br><span class="line">    String msg = <span class="string">"出现NPE异常了!!!"</span>;</span><br><span class="line">    AlarmWrapper.getInstance().sendMsg(key, title, msg);  <span class="comment">// 微信报警</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 不存在异常配置类型, 采用默认报警, 次数较小, 则直接部署出</span></span><br><span class="line">    AlarmWrapper.getInstance().sendMsg(<span class="string">"zzz"</span>, <span class="string">"不存在xxx异常配置"</span>, <span class="string">"报警嗒嗒嗒嗒"</span>);</span><br><span class="line"></span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="II-报警执行机器扩展"><a href="#II-报警执行机器扩展" class="headerlink" title="II. 报警执行机器扩展"></a>II. 报警执行机器扩展</h2><p>前面的报警规则配置中，有WEIXIN, SMS, EMAIL的报警，但是系统只提供了两个NONE和LOG，所以我们可以看下如何自定义实现上面的三个</p>
<h3 id="1-实现IExecute接口"><a href="#1-实现IExecute接口" class="headerlink" title="1. 实现IExecute接口"></a>1. 实现IExecute接口</h3><p>邮件报警</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailExecute</span> <span class="keyword">extends</span> <span class="title">LogExecute</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMsg</span><span class="params">(List&lt;String&gt; users, String title, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.sendMsg(users, title, msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>短信报警</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yihui on 2018/2/7.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SmsExecute</span> <span class="keyword">extends</span> <span class="title">LogExecute</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMsg</span><span class="params">(List&lt;String&gt; users, String title, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.sendMsg(users, title, msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>微信报警</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yihui on 2018/2/7.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeiXinExecute</span> <span class="keyword">extends</span> <span class="title">LogExecute</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMsg</span><span class="params">(List&lt;String&gt; users, String title, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.sendMsg(users, title, msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>说明，因为没有具体的实现，所以我们直接用日志输出来模拟，所以就都继承了LogExecute, 实际使用中，可以在上面补上相应的实现代码</p>
<h3 id="2-添加SPI定义"><a href="#2-添加SPI定义" class="headerlink" title="2. 添加SPI定义"></a>2. 添加SPI定义</h3><p>在 resources 目录下，新增</p>
<ul>
<li>目录：META-INF/services/ </li>
<li>文件：com.hust.hui.alarm.core.execut.api.IExecute</li>
</ul>
<p>文件内容为上面几个实现类的全路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">com.hust.hui.alarm.core.test.execute.EmailExecute</span><br><span class="line">com.hust.hui.alarm.core.test.execute.SmsExecute</span><br><span class="line">com.hust.hui.alarm.core.test.execute.WeiXinExecute</span><br></pre></td></tr></table></figure>
<p>目录结构如：</p>
<p><img src="https://s3.mogucdn.com/mlcdn/c45406/180211_39e88dgb9c5f1h1ggdae85dde89ii_938x266.jpg" alt="IMAGE"></p>
<h3 id="3-测试"><a href="#3-测试" class="headerlink" title="3. 测试"></a>3. 测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">// 测试异常升级的case</span></span><br><span class="line">    <span class="comment">// 计数 [1 - 2] 默认报警（即无日志） （其中 &lt; 3 的是因为未达到下限, 采用的默认报警）</span></span><br><span class="line">    <span class="comment">// 计数 [3 - 4] 默认邮件报警（其中 &lt; 5 采用的默认报警, 与下面的区别是报警用户）</span></span><br><span class="line">    <span class="comment">// 计数 [5 - 9] 邮件报警 （大于5小于10根据上升规则,还是选择邮件报警）</span></span><br><span class="line">    <span class="comment">// 计数 [10 - 19] 微信报警</span></span><br><span class="line">    <span class="comment">// 计数 [20 - 30] 短信报警</span></span><br><span class="line">    <span class="comment">// 计数 [31 -] 默认报警 （超过上限, 不报警）</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">40</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                AlarmWrapper.getInstance().sendMsg(<span class="string">"YYY"</span>, <span class="string">"异常报警升级测试"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Thread.sleep(<span class="number">1000</span> * <span class="number">600</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实测输出结果如下:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">18:36:28.997 [Thread-12] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 26 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-24] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 16 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-33] INFO  alarm - Do send msg by EMAIL to user:[yihui@xxx.com, erhui@xxx.com], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 6 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-22] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 18 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-26] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 14 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-23] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 17 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-35] INFO  alarm - Do send msg by EMAIL to user:[yihui@xxx.com], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 4 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.997 [sms-sender1-thread-4] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 10 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.997 [sms-sender1-thread-3] INFO  alarm - Do send msg by EMAIL to user:[yihui@xxx.com, erhui@xxx.com], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 5 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.997 [Thread-18] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 27 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.997 [Thread-11] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 28 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-21] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 19 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.997 [sms-sender1-thread-2] INFO  alarm - Do send msg by EMAIL to user:[yihui@xxx.com, erhui@xxx.com], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 9 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-14] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 24 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.997 [Thread-10] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 29 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-15] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 22 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-16] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 23 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [sms-sender1-thread-5] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 15 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-9] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 30 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [sms-sender1-thread-1] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 11 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-13] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 25 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-19] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 21 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:28.998 [Thread-34] INFO  alarm - Do send msg by EMAIL to user:[yihui@xxx.com], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 3 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:29.010 [sms-sender1-thread-4] INFO  alarm - Do send msg by EMAIL to user:[yihui@xxx.com, erhui@xxx.com], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 7 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:29.010 [sms-sender1-thread-3] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 12 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:29.011 [sms-sender1-thread-2] INFO  alarm - Do send msg by WEIXIN to user:[yihui, erhui], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 13 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:29.014 [sms-sender1-thread-5] INFO  alarm - Do send msg by EMAIL to user:[yihui@xxx.com, erhui@xxx.com], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 8 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:36:29.014 [sms-sender1-thread-1] INFO  alarm - Do send msg by SMS to user:[345345345345, 123123123123], title: [<span class="built_in">test</span>], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 20 &gt;&gt;&gt; 异常报警升级测试</span><br></pre></td></tr></table></figure>
<h2 id="III-报警规则加载自定义"><a href="#III-报警规则加载自定义" class="headerlink" title="III. 报警规则加载自定义"></a>III. 报警规则加载自定义</h2><h3 id="1-实现IConfLoader接口"><a href="#1-实现IConfLoader接口" class="headerlink" title="1. 实现IConfLoader接口"></a>1. 实现IConfLoader接口</h3><p>自定义加载器，给了一个最基本的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SelfAlarmConfLoader</span> <span class="keyword">implements</span> <span class="title">IConfLoader</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RegisterInfo <span class="title">getRegisterInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RegisterInfo registerInfo = <span class="keyword">new</span> RegisterInfo();</span><br><span class="line">        registerInfo.setMaxAlarmType(<span class="number">100</span>);</span><br><span class="line">        registerInfo.setDefaultAlarmUsers(<span class="string">"yihui"</span>);</span><br><span class="line">        registerInfo.setAppName(<span class="string">"test"</span>);</span><br><span class="line">        <span class="keyword">return</span> registerInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">alarmEnable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">order</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AlarmConfig <span class="title">getAlarmConfig</span><span class="params">(String alarmKey)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//db 查询，获取对应的配置信息</span></span><br><span class="line">        <span class="comment">// 下面是模拟，返回一个固定的配置</span></span><br><span class="line">        AlarmConfig alarmConfig = <span class="keyword">new</span> AlarmConfig();</span><br><span class="line">        alarmConfig.setAlarmLevel(<span class="string">"WEIXIN"</span>);</span><br><span class="line">        alarmConfig.setAutoIncEmergency(<span class="keyword">false</span>);</span><br><span class="line">        alarmConfig.setMinLimit(<span class="number">10</span>);</span><br><span class="line">        alarmConfig.setMaxLimit(<span class="number">14</span>);</span><br><span class="line">        alarmConfig.setUsers(Arrays.asList(<span class="string">"yihui"</span>));</span><br><span class="line">        alarmConfig.setAlarmThreshold(Collections.emptyList());</span><br><span class="line">        <span class="keyword">return</span> alarmConfig;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-添加SPI配置"><a href="#2-添加SPI配置" class="headerlink" title="2. 添加SPI配置"></a>2. 添加SPI配置</h3><p>在resources目录下新增</p>
<ul>
<li>目录： META-INF/services</li>
<li>文件： com.hust.hui.alarm.core.loader.api.IConfLoader</li>
</ul>
<p>文件内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.hust.hui.alarm.core.test.loader.SelfAlarmConfLoader</span><br></pre></td></tr></table></figure>
<h3 id="3-测试-1"><a href="#3-测试-1" class="headerlink" title="3. 测试"></a>3. 测试</h3><p>同样是上面的代码，输出结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">18:43:04.275 [sms-sender1-thread-2] INFO  alarm - Do send msg by WEIXIN to user:[yihui], title: [test], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 10 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:43:04.275 [sms-sender1-thread-4] INFO  alarm - Do send msg by WEIXIN to user:[yihui], title: [test], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 12 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:43:04.276 [sms-sender1-thread-1] INFO  alarm - Do send msg by WEIXIN to user:[yihui], title: [test], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 11 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:43:04.275 [sms-sender1-thread-5] INFO  alarm - Do send msg by WEIXIN to user:[yihui], title: [test], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 14 &gt;&gt;&gt; 异常报警升级测试</span><br><span class="line">18:43:04.275 [sms-sender1-thread-3] INFO  alarm - Do send msg by WEIXIN to user:[yihui], title: [test], msg:  ip:172.17.13.18 &gt;&gt;&gt; key:YYY &gt;&gt;&gt; 异常数: 13 &gt;&gt;&gt; 异常报警升级测试</span><br></pre></td></tr></table></figure>
<h3 id="4-说明"><a href="#4-说明" class="headerlink" title="4. 说明"></a>4. 说明</h3><p>系统默认的order是10，所以如果在测试上面的第二步时，不妨把<code>com.hust.hui.alarm.core.test.loader.SelfAlarmConfLoader#order</code>返回值，改成大于10，这样就会走到默认的配置加载类</p>
<p>采用 <code>SelfAlarmConfLoader</code> 时，前面说的两个基础配置文件，是可以没有的，完全不会有任何影响，因为对应的注册类和报警规则，都是右这个类内部提供了</p>
<h2 id="IV-小结"><a href="#IV-小结" class="headerlink" title="IV. 小结"></a>IV. 小结</h2><p>所有测试相关数据，均可以在测试工程中获取，请主要关注:</p>
<ul>
<li><a href="https://github.com/liuyueyi/quick-alarm/blob/master/core/src/test/java/com/hust/hui/alarm/core/test/" target="_blank" rel="noopener">测试case</a></li>
<li>注册文件：<a href="https://github.com/liuyueyi/quick-alarm/blob/master/core/src/test/resources/alarm.properties" target="_blank" rel="noopener">alarmConfig</a></li>
<li>报警规则配置文件：<a href="https://github.com/liuyueyi/quick-alarm/blob/master/core/src/main/resources/alarmConfig" target="_blank" rel="noopener">alarm.properties</a></li>
</ul>
<h2 id="V-其他"><a href="#V-其他" class="headerlink" title="V. 其他"></a>V. 其他</h2><h3 id="相关博文"><a href="#相关博文" class="headerlink" title="相关博文"></a>相关博文</h3><ol>
<li><a href="https://liuyueyi.github.io/hexblog/2018/02/09/报警系统QuickAlarm总纲/" target="_blank" rel="noopener">报警系统QuickAlarm总纲</a></li>
<li><a href="https://liuyueyi.github.io/hexblog/2018/02/09/报警系统QuickAlarm之报警执行器的设计与实现/" target="_blank" rel="noopener">报警系统QuickAlarm之报警执行器的设计与实现</a></li>
<li><a href="https://liuyueyi.github.io/hexblog/2018/02/09/报警系统QuickAlarm之报警规则的设定与加载/" target="_blank" rel="noopener">报警系统QuickAlarm之报警规则的设定与加载</a></li>
<li><a href="https://liuyueyi.github.io/hexblog/2018/02/11/报警系统QuickAlarm之报警规则解析/" target="_blank" rel="noopener">报警系统QuickAlarm之报警规则解析</a></li>
<li><a href="https://liuyueyi.github.io/hexblog/2018/02/11/报警系统QuickAlarm之频率统计及接口封装/" target="_blank" rel="noopener">报警系统QuickAlarm之频率统计及接口封装</a></li>
<li><a href="https://liuyueyi.github.io/hexblog/2018/02/11/报警系统QuickAlarm使用手册/" target="_blank" rel="noopener">报警系统QuickAlarm使用手册</a></li>
<li><a href="https://liuyueyi.github.io/hexblog/2018/03/05/报警系统QuickAlarm之默认报警规则扩展/" target="_blank" rel="noopener">报警系统QuickAlarm之默认报警规则扩展</a></li>
</ol>
<h3 id="项目-QuickAlarm"><a href="#项目-QuickAlarm" class="headerlink" title="项目: QuickAlarm"></a>项目: QuickAlarm</h3><ul>
<li>项目地址： <a href="https://github.com/liuyueyi/quick-alarm" target="_blank" rel="noopener">Quick-Alarm</a></li>
<li>博客地址： <a href="https://liuyueyi.github.io/hexblog/" target="_blank" rel="noopener">小灰灰Blog</a></li>
</ul>
<h3 id="个人博客：-Z-blog"><a href="#个人博客：-Z-blog" class="headerlink" title="个人博客： Z+|blog"></a>个人博客： <a href="https://liuyueyi.github.io/hexblog" target="_blank" rel="noopener">Z+|blog</a></h3><p>基于hexo + github pages搭建的个人博客，记录所有学习和工作中的博文，欢迎大家前去逛逛</p>
<h3 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h3><p>尽信书则不如，已上内容，纯属一家之言，因本人能力一般，见识有限，如发现bug或者有更好的建议，随时欢迎批评指正，我的微博地址: <a href="https://weibo.com/p/1005052169825577/home" target="_blank" rel="noopener">小灰灰Blog</a></p>
<h3 id="扫描关注"><a href="#扫描关注" class="headerlink" title="扫描关注"></a>扫描关注</h3><p><img src="https://s17.mogucdn.com/mlcdn/c45406/180209_74fic633aebgh5dgfhid2fiiggc99_1220x480.png" alt="QrCode"></p>
</div><div class="tags"><a href="/hexblog/tags/Java/">Java</a><a href="/hexblog/tags/SPI/">SPI</a><a href="/hexblog/tags/QuickAlarm/">QuickAlarm</a><a href="/hexblog/tags/使用手册/">使用手册</a></div><div style="text-align:center"><br><button style="color:red;background-color: #f44336;border: none;border-radius: 8px;color: white;padding: 10px 30px;text-align: center;text-decoration: none;font-size: 16px;" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">打赏</button><br><span style="display: block;color: #9d9d9d;font: 14px/2 &amp;quot;Microsoft Yahei&amp;quot;">如果觉得我的文章对您有帮助，请随意打赏。</span><br><div id="QR" style="display: none; margin-top: 20px;" class="row"><div id="wechat" style="display: inline-block;width:44%;margin-left:6%;text-align:center;"><a href="https://s3.mogucdn.com/mlcdn/c45406/180104_50136i33id9e49j1f7k2e219e3ldf_800x798.png"><img src="https://s3.mogucdn.com/mlcdn/c45406/180104_50136i33id9e49j1f7k2e219e3ldf_800x798.png" alt="WeChat Pay" style="width:80%;height:80%;max-height:200px;max-width:200px"></a><p style="text-align:center">微信打赏</p></div><div id="alipay" style="display: inline-block;width:44%;text-align:center"><a href="https://s3.mogucdn.com/mlcdn/c45406/180104_0e6afl33b23lacj6ji2d7d060aiak_798x800.png"><img src="https://s3.mogucdn.com/mlcdn/c45406/180104_0e6afl33b23lacj6ji2d7d060aiak_798x800.png" alt="Alipay" style="width:80%;height:80%;max-height:200px;max-width:200px"></a><p style="text-align:center">支付宝打赏</p></div></div></div><div class="post-share"><div><script src="https://s3.mogucdn.com/mlcdn/c45406/1520387600580_dom-to-image.min.js" charset="utf-8"></script><script>var url;
console.log('start--->',(new Date()).valueOf());
domtoimage.toPng(document.getElementsByClassName('layout-l')[0])
    .then(function (dataUrl) {
        url = dataUrl;
        console.log('end--->',(new Date()).valueOf());
     })
    .catch(function (error) {});
function link() {    
    window.open().document.write('<html><head><title>渲染图</title></head><body><div style=\'text-align:center\' ><img src="' + url + '" /></div></body></html>');
}</script><span style="float:center;font-size:20px;font-weight:solid;color:gray">渲染：</span><a id="saveImg" href="javascript:void(0)" onclick="link()" class="save_img">保存图片</a></div><div id="share" class="soshm social-share"><span style="float:center;font-size:20px;font-weight:solid;color:gray">分享：</span></div></div><div class="post-nav"><a href="/hexblog/2018/02/12/借助GitHub搭建属于自己的maven仓库教程/" class="pre">借助GitHub搭建属于自己的maven仓库教程</a><a href="/hexblog/2018/02/11/报警系统QuickAlarm之频率统计及接口封装/" class="next">5. 报警系统QuickAlarm之频率统计及接口封装</a></div><div id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zNDY0OC8xMTE4NQ=="></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-基本使用姿势"><span class="toc-text">1. 基本使用姿势</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-添加注册文件"><span class="toc-text">1. 添加注册文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-添加报警规则"><span class="toc-text">2. 添加报警规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-测试类"><span class="toc-text">3. 测试类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#II-报警执行机器扩展"><span class="toc-text">II. 报警执行机器扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-实现IExecute接口"><span class="toc-text">1. 实现IExecute接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-添加SPI定义"><span class="toc-text">2. 添加SPI定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-测试"><span class="toc-text">3. 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#III-报警规则加载自定义"><span class="toc-text">III. 报警规则加载自定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-实现IConfLoader接口"><span class="toc-text">1. 实现IConfLoader接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-添加SPI配置"><span class="toc-text">2. 添加SPI配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-测试-1"><span class="toc-text">3. 测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-说明"><span class="toc-text">4. 说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IV-小结"><span class="toc-text">IV. 小结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#V-其他"><span class="toc-text">V. 其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#相关博文"><span class="toc-text">相关博文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#项目-QuickAlarm"><span class="toc-text">项目: QuickAlarm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#个人博客：-Z-blog"><span class="toc-text">个人博客： Z+|blog</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#声明"><span class="toc-text">声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#扫描关注"><span class="toc-text">扫描关注</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><a href="/hexblog/about/"><i class="fa fa-user"> 一灰灰Blog</i></a></div><ul class="post-list"><li style="text-align:center"><img src="//s3.mogucdn.com/mlcdn/c45406/170419_637cgff527i8k9k8h512iaf36cdia_600x600.jpg" style="max-width:80px;radius:80px"/><p style="text-align:center">好好学习，天天搬砖</p><hr style="height:0.1px;border:none;border-top:1px dashed #0066CC;"/></li><li class="post-list-item"><a href="mailto:bangzewu@126.com" title="126邮箱" class="post-list-link"><i class="fa fa-email">  bangzewu@126.com</i></a></li><li class="post-list-item"><a href="//github.com/liuyueyi" title="Git主页" target="_blank" class="post-list-link"><i class="fa fa-github">  github.com/liuyueyi</i></a></li><li class="post-list-item"><a href="" title="QQ" class="post-list-link"><i class="fa fa-you">  QQ:3302797840</i></a></li><li class="post-list-item"><a href="//weibo.com/p/1005052169825577/home" title="微博主页" target="_blank" class="post-list-link"><i class="fa fa-weibo">  微博:小灰灰Blog</i></a></li><li class="post-list-item"><i class="fa fa-weixin">  微信公众号</i></li><li style="text-align:center" class="post-list-item"><img src="https://s10.mogucdn.com/mlcdn/c45406/171229_1cgld3igbelkbc70cd8af1j3809kb_150x150.jpg"/></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/03/08/JQuery-实战笔记一/">JQuery 实战笔记一</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/03/06/Java并发学习之线程池ThreadPoolExecutor的小结/">Java并发学习之线程池ThreadPoolExecutor的小结</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/03/05/报警系统QuickAlarm之默认报警规则扩展/">7. 报警系统QuickAlarm之默认报警规则扩展</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/02/12/借助GitHub搭建属于自己的maven仓库教程/">借助GitHub搭建属于自己的maven仓库教程</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/02/11/报警系统QuickAlarm使用手册/">6. 报警系统QuickAlarm使用手册</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/02/11/报警系统QuickAlarm之频率统计及接口封装/">5. 报警系统QuickAlarm之频率统计及接口封装</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/02/11/报警系统QuickAlarm之报警规则解析/">4. 报警系统QuickAlarm之报警规则解析</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/02/09/报警系统QuickAlarm之报警规则的设定与加载/">3. 报警系统QuickAlarm之报警规则的设定与加载</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/02/09/报警系统QuickAlarm之报警执行器的设计与实现/">2. 报警系统QuickAlarm之报警执行器的设计与实现</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/02/09/报警系统QuickAlarm总纲/">1. 报警系统QuickAlarm设计总纲</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类(34)</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Android/">Android</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Android/一封/">一封</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/BugFix/">BugFix</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/BugFix/Java/">Java</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/BugFix/Java/Image/">Image</a><span class="category-list-count">2</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Java/">Java</a><span class="category-list-count">13</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Java/Concurrency/">Concurrency</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Java/JDK/">JDK</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Java/JVM/">JVM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Java/JavaWeb/">JavaWeb</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Java/Spring/">Spring</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Java/Tool/">Tool</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Quick系列项目/">Quick系列项目</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Quick系列项目/QuickAlarm/">QuickAlarm</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Quick系列项目/QuickSpi/">QuickSpi</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Shell/">Shell</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Shell/Git/">Git</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Shell/Git/Maven/">Maven</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Shell/Nginx/">Nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/Shell/环境搭建/">环境搭建</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/前端/">前端</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/前端/Jquery/">Jquery</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/随笔/">随笔</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签墙(34)</i></div><div class="tagcloud"><!--!= tagcloud({min_font: 15, max_font: 15, amount: 100, orderby: 'count'})--><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/RequestParam/">RequestParam</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/日记/">日记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/一封/">一封</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/RelativeLayout/">RelativeLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/CountDownTimer/">CountDownTimer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Bugfix/">Bugfix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Java/">Java</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/batik/">batik</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Png/">Png</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Gitbook/">Gitbook</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Centos/">Centos</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Reflect/">Reflect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/JavaWeb/">JavaWeb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Filter/">Filter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Servlet/">Servlet</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/JDK/">JDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Initialize/">Initialize</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/File/">File</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/ScheduledExecutorService/">ScheduledExecutorService</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/clone/">clone</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/beancopy/">beancopy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Nginx/">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/distributeLock/">distributeLock</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Spring/">Spring</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Android/">Android</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Jsonp/">Jsonp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/CORS/">CORS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Exception/">Exception</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Response/">Response</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/JVM/">JVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Github/">Github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Maven/">Maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/BugFix/">BugFix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/BufferedImage/">BufferedImage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Jpeg/">Jpeg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Okhttp/">Okhttp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/SPI/">SPI</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/QuickAlarm/">QuickAlarm</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/教程/">教程</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Hexo/">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/整体设计/">整体设计</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/使用手册/">使用手册</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/配置/">配置</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Redis/">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/工具/">工具</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/并发/">并发</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/ThreadPoolExecutor/">ThreadPoolExecutor</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Jquery/">Jquery</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/笔记/">笔记</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档(34)</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2018/03/">三月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2018/02/">二月 2018</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2018/01/">一月 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2017/12/">十二月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2017/05/">五月 2017</a><span class="archive-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 更多链接</i></div><ul style="padding-top:10px"></ul><li style="padding-top:2px"><a href="//my.oschina.net/u/566591" title="开源中国" target="_blank">开源中国</a></li><li style="padding-top:2px"><a href="//blog.csdn.net/liuyueyi25" title="CSDN" target="_blank">CSDN</a></li><li style="padding-top:2px"><a href="//www.jianshu.com/u/5902ab08e670" title="简书" target="_blank">简书</a></li><li style="padding-top:2px"><a href="//juejin.im/user/5a2a4b095188252ae93adbbf/posts" title="掘金" target="_blank">掘金</a></li><li style="padding-top:2px"><a href="//www.toutiao.com/c/user/69862071663/#mid=1579653107239950" title="头条" target="_blank">头条</a></li></div><div class="widget"><div class="widget-title"><i onclick="var qr = document.getElementById('qrcode'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}" style="cursor:pointer" class="fa fa-hit"> 点赞(点击展开)</i></div><ul id="qrcode" style="display:none;" class="post-list"><br/><li style="text-align:center" class="post-list-item"><a href="https://s3.mogucdn.com/mlcdn/c45406/180104_50136i33id9e49j1f7k2e219e3ldf_800x798.png" target="_blank"><img src="https://s3.mogucdn.com/mlcdn/c45406/180104_50136i33id9e49j1f7k2e219e3ldf_800x798.png" alt="WeChat Pay" style="width:75%"/><br/><p style="text-align:center">微信打赏</p></a></li><li style="text-align:center" class="post-list-item"><a href="https://s3.mogucdn.com/mlcdn/c45406/180104_0e6afl33b23lacj6ji2d7d060aiak_798x800.png" target="_blank"><img src="https://s3.mogucdn.com/mlcdn/c45406/180104_0e6afl33b23lacj6ji2d7d060aiak_798x800.png" alt="Alipay" style="width:75%"/><br/><p style="text-align:center">支付宝打赏</p></a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="https://zbang.online/webs"><img src="//s3.mogucdn.com/mlcdn/c45406/170419_637cgff527i8k9k8h512iaf36cdia_600x600.jpg" style="max-width: 44px;border-radius:44px"></a></p><p><a href="https://github.com/liuyueyi" target="_blank">GitHub</a> |  <a href="mailto:bangzewu@126.com">email</a> |  <a href="/hexblog/about/">关于 |</a><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p></p><p><span> Copyright &copy;<a href="/hexblog/." rel="nofollow">YiHui.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?028d9e53f991d9739ecc7cc42e13c500";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/hexblog/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/hexblog/js/toctotop.js?v=2.0.1" async></script><script src="https://s3.mogucdn.com/mlcdn/c45406/1520407228303_social-share.min.js" charset="utf-8"></script><link rel="stylesheet" href="https://s3.mogucdn.com/mlcdn/c45406/1518422561591_share.min.css"><script>(function(d, s) {
  var j, e = d.getElementsByTagName('body')[0];
  if (typeof LivereTower === 'function') { return; }
  j = d.createElement(s);
  j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
  j.async = true;
  e.appendChild(j);
})(document, 'script');
</script></body></html>