<!DOCTYPE html><html lang="zh-CN"><head><meta name="google-site-verification" content="PR6S72-htn-N1oDn9ENMcwi5niLKk0uebDzmRS-oivs"><meta property="wb:webmaster" content="320520520031fedd"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="好好学习，努力搬砖，天天吃草"><title>mysql之索引的工作机制 | 一灰灰Blog</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/hexblog/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/hexblog/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/hexblog/favicon.ico"><link rel="bookmark" href="/hexblog/favicon.ico"><link rel="apple-touch-icon" href="/hexblog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/hexblog/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">mysql之索引的工作机制</h1><a id="logo" href="/hexblog/.">一灰灰Blog</a><p style="font-size:18px" class="description">一灰灰的个人博客网站</p></div><div id="nav-menu"><a href="/hexblog/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/hexblog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/hexblog/about/"><i class="fa fa-user"> 关于</i></a><a href="http://liuyueyi.gitee.io/zweb/#/index"><i class="fa fa-rss"> 网站</i></a><a href="http://liuyueyi.gitee.io/mweb/#/"><i class="fa fa-you"> 古诗选</i></a><hr><br><div id="nav-sub-menu"><a href="/hexblog/categories/技术"><i class="fa fa-right"> 技术</i></a><a href="/hexblog/categories/工作"><i class="fa fa-right"> 工作</i></a><a href="/hexblog/categories/生活"><i class="fa fa-right"> 生活</i></a><a href="/hexblog/categories/杂记"><i class="fa fa-right"> 杂记</i></a></div></div>
<div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/hexblog/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">mysql之索引的工作机制 <span style="font-size:14px;color:#40759b;font-style:italic;border-bottom: 1px solid #e5e5e5;">&gt;&gt;&gt; by 一灰灰Blog</span></h1><div class="post-meta"><a href="/hexblog/2018/03/22/mysql之索引的工作机制/#saveImg" class="saveImg-icon"></a><a href="/hexblog/2018/03/22/mysql之索引的工作机制/#comments" class="comment-count"></a><p><span class="date">Mar 22, 2018</span><span><a href="/hexblog/categories/技术/" class="category">技术</a><a href="/hexblog/categories/技术/DB/" class="category">DB</a><a href="/hexblog/categories/技术/DB/Mysql/" class="category">Mysql</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h1 id="mysql之高性能索引"><a href="#mysql之高性能索引" class="headerlink" title="mysql之高性能索引"></a>mysql之高性能索引</h1><p>当db的量达到一定数量级之后，每次进行全表扫描效率就会很低，因此一个常见的方案是建立一些必要的索引作为优化手段，那么问题就来了：</p>
<ul>
<li>那么什么是索引呢？</li>
<li>索引的实现原理是怎样的？</li>
<li>我们通常说的聚集索引，非聚集索引的区别是什么？</li>
<li>如何创建和使用索引呢？</li>
</ul>
<a id="more"></a>
<h2 id="I-索引介绍"><a href="#I-索引介绍" class="headerlink" title="I. 索引介绍"></a>I. 索引介绍</h2><p>MySQL官方对索引的定义为：索引是帮助MySQL高效获取数据的数据结构。简而言之,索引是数据结构</p>
<h3 id="1-几种树的结构"><a href="#1-几种树的结构" class="headerlink" title="1. 几种树的结构"></a>1. 几种树的结构</h3><h4 id="a-B-树"><a href="#a-B-树" class="headerlink" title="a. B+树"></a>a. B+树</h4><p>单来说就是一种为磁盘或者其他存储设备而设计的一种平衡二叉树,在B+tree中所有记录都按照key的大小存放在叶子结点上，各叶子结点直接用指针连接</p>
<h4 id="b-二叉树"><a href="#b-二叉树" class="headerlink" title="b. 二叉树"></a>b. 二叉树</h4><p>二叉树的规则是父节点大于左孩子节点，小于右孩子节点</p>
<h4 id="c-平衡二叉树"><a href="#c-平衡二叉树" class="headerlink" title="c. 平衡二叉树"></a>c. 平衡二叉树</h4><p>首先是一个二叉树，但是要求任意一个节点的左右孩子节点的高度差不大于1</p>
<h4 id="d-B树"><a href="#d-B树" class="headerlink" title="d. B树"></a>d. B树</h4><p>首先是一个平衡二叉树，但是又要求每个叶子节点到根节点的距离相等</p>
<p>那么B树和B+树的区别是什么呢？</p>
<ul>
<li>B+树的叶子节点可以包含一个指针，指向另一个叶子节点</li>
<li>B+树键值的拷贝存在非叶子节点；键值+记录存储在叶子节点</li>
</ul>
<h3 id="2-InnoDB引擎之B-树"><a href="#2-InnoDB引擎之B-树" class="headerlink" title="2. InnoDB引擎之B+树"></a>2. InnoDB引擎之B+树</h3><p>mysql的InnnoDB引擎采用的B+树，只有叶子节点存储对应的数据列，有以下好处</p>
<ul>
<li>叶子结点通常包含较多的记录，具有较高的扇出性(可理解为每个节点对应的下层节点较多)，因此树的高度较低(3~4)，而树的高度也决定了磁盘IO的次数，从而影响了数据库的性能。一般情况下，IO次数与树的高度是一致的</li>
<li>对于组合索引，B+tree索引是按照索引列名(从左到右的顺序)进行顺序排序的，因此可以将随机IO转换为顺序IO提升IO效率;并且可以支持order by \group等排序需求;适合范围查询</li>
</ul>
<h3 id="3-hash索引"><a href="#3-hash索引" class="headerlink" title="3. hash索引"></a>3. hash索引</h3><p>hash索引，相比较于B树而言，不需要从根节点到叶子节点的遍历，可以一次定位到位置，查询效率更高，但缺点也很明显</p>
<ul>
<li>仅能满足”=”,”IN”和”&lt;=&gt;”查询，不能使用范围查询<ul>
<li>因为是通过hash值进行计算，所以只能精确查询，hash值是没什么规律的，不能保证顺序和原来一致，所以范围查询不行</li>
</ul>
</li>
<li>无法进行排序<ul>
<li>原因同上</li>
</ul>
</li>
<li>不支持部分索引<ul>
<li>hash值的计算，是根据完整的几个索引列计算，如果少了其中一个乃至几个，这个hash值就没法计算了</li>
</ul>
</li>
<li>hash碰撞</li>
</ul>
<h3 id="4-聚集索引与非聚集索引"><a href="#4-聚集索引与非聚集索引" class="headerlink" title="4. 聚集索引与非聚集索引"></a>4. 聚集索引与非聚集索引</h3><h4 id="a-聚集索引"><a href="#a-聚集索引" class="headerlink" title="a. 聚集索引"></a>a. 聚集索引</h4><p>InnoDB的数据文件本身就是索引文件，B+Tree的叶子节点上的data就是数据本身，key为主键，非叶子节点存放&lt;key,address&gt;，address就是下一层的地址</p>
<p>聚簇索引的结构图:</p>
<p><img src="https://raw.githubusercontent.com/liuyueyi/Source/master/img/blog/db/180322_INDEX1.png" alt="数据结构"></p>
<h4 id="b-非聚集索引"><a href="#b-非聚集索引" class="headerlink" title="b. 非聚集索引"></a>b. 非聚集索引</h4><p>非聚簇索引，叶子节点上的data是主键(即聚簇索引的主键，所以聚簇索引的key，不能过长)。为什么存放的主键，而不是记录所在地址呢，理由相当简单，因为记录所在地址并不能保证一定不会变，但主键可以保证</p>
<p>非聚簇索引结构图：</p>
<p><img src="https://raw.githubusercontent.com/liuyueyi/Source/master/img/blog/db/180322_INDEX2.png" alt="数据结构"></p>
<p>从非聚集索引的结构上，可以看出这种场景下的定位流程：</p>
<ul>
<li>先通过非聚集索引，定位到对应的叶子节点，找到对应的主键</li>
<li>根据上面找到的主键，在聚集索引中，定位到对应的叶子节点（获取数据）</li>
</ul>
<h3 id="5-索引的优点"><a href="#5-索引的优点" class="headerlink" title="5. 索引的优点"></a>5. 索引的优点</h3><ul>
<li>避免全表扫描（当走不到索引时，就只能一个一个的去匹配；如果走索引，则可以根据B树来定位）</li>
<li>使用索引可以帮助服务器避免排序或者临时表 （叶子节点上的指针，可以有效的支持范围查询；此外叶子节点本身就是根据key进行排序的）</li>
<li>索引将随机IO变成顺序IO</li>
</ul>
<h3 id="6-适用范围"><a href="#6-适用范围" class="headerlink" title="6. 适用范围"></a>6. 适用范围</h3><p>索引并不是适用于任何情况。对于中型、大型表适用。对于小型表全表扫描更高效。而对于特大型表，考虑”分区”技术</p>
<h2 id="II-索引的使用原则"><a href="#II-索引的使用原则" class="headerlink" title="II. 索引的使用原则"></a>II. 索引的使用原则</h2><p>一般我们在创建表的时候，需要指定primary key, 这样就可以确定聚集索引了，那么如何添加非聚集索引呢？</p>
<h3 id="1-索引的几个语法"><a href="#1-索引的几个语法" class="headerlink" title="1. 索引的几个语法"></a>1. 索引的几个语法</h3><p><strong>创建索引</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建索引</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> <span class="string">`idx_img`</span> <span class="keyword">on</span> newuser(<span class="string">`img`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> newuser\G;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">show create table newuser\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">       Table: newuser</span><br><span class="line">Create Table: CREATE TABLE `newuser` (</span><br><span class="line">  `userId` bigint(20) NOT NULL AUTO_INCREMENT COMMENT <span class="string">'用户id'</span>,</span><br><span class="line">  `username` varchar(30) DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户登录名'</span>,</span><br><span class="line">  `nickname` varchar(30) NOT NULL DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户昵称'</span>,</span><br><span class="line">  `password` varchar(50) DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户登录密码 &amp; 密文根式'</span>,</span><br><span class="line">  `address` text COMMENT <span class="string">'用户地址'</span>,</span><br><span class="line">  `email` varchar(50) NOT NULL DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户邮箱'</span>,</span><br><span class="line">  `phone` bigint(20) NOT NULL DEFAULT <span class="string">'0'</span> COMMENT <span class="string">'用户手机号'</span>,</span><br><span class="line">  `img` varchar(100) DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户头像'</span>,</span><br><span class="line">  `extra` text,</span><br><span class="line">  `isDeleted` tinyint(1) unsigned NOT NULL DEFAULT <span class="string">'0'</span>,</span><br><span class="line">  `created` int(11) NOT NULL,</span><br><span class="line">  `updated` int(11) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`userId`),</span><br><span class="line">  KEY `idx_username` (`username`),</span><br><span class="line">  KEY `idx_nickname` (`nickname`),</span><br><span class="line">  KEY `idx_email` (`email`),</span><br><span class="line">  KEY `idx_phone` (`phone`),</span><br><span class="line">  KEY `idx_img` (`img`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8</span><br></pre></td></tr></table></figure>
<p><strong>另一种常见的添加索引方式</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> newuser <span class="keyword">add</span> <span class="keyword">index</span> <span class="string">`idx_extra_img`</span>(<span class="string">`isDeleted`</span>, <span class="string">`img`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看索引</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> newuser;</span><br></pre></td></tr></table></figure>
<p>输出结果</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">+---------+------------+---------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+</span><br><span class="line">| Table   | Non_unique | Key_name      | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |</span><br><span class="line">+---------+------------+---------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+</span><br><span class="line">| newuser |          0 | PRIMARY       |            1 | userId      | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_username  |            1 | username    | A         |           3 |     NULL | NULL   | YES  | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_nickname  |            1 | nickname    | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_email     |            1 | email       | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_phone     |            1 | phone       | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_img       |            1 | img         | A         |           3 |     NULL | NULL   | YES  | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_extra_img |            1 | isDeleted   | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_extra_img |            2 | img         | A         |           3 |     NULL | NULL   | YES  | BTREE      |         |               |</span><br><span class="line">+---------+------------+---------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+</span><br></pre></td></tr></table></figure>
<p><strong>删除索引</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> <span class="string">`idx_extra_img`</span> <span class="keyword">on</span> newuser;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> <span class="string">`idx_img`</span> <span class="keyword">on</span> newuser;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看索引</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> newuser;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">show index from newuser;</span><br><span class="line">+---------+------------+--------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+</span><br><span class="line">| Table   | Non_unique | Key_name     | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |</span><br><span class="line">+---------+------------+--------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+</span><br><span class="line">| newuser |          0 | PRIMARY      |            1 | userId      | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_username |            1 | username    | A         |           3 |     NULL | NULL   | YES  | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_nickname |            1 | nickname    | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_email    |            1 | email       | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |</span><br><span class="line">| newuser |          1 | idx_phone    |            1 | phone       | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |</span><br><span class="line">+---------+------------+--------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+</span><br></pre></td></tr></table></figure>
<p><strong>强制走索引的一种方式</strong></p>
<p>语法： <code>select * from table force index(索引) where xxx</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> newuser <span class="keyword">force</span> <span class="keyword">index</span>(PRIMARY) <span class="keyword">where</span> userId <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">-- +----+-------------+---------+-------+---------------+---------+---------+------+------+-------------+</span></span><br><span class="line"><span class="comment">-- | id | select_type | table   | type  | possible_keys | key     | key_len | ref  | rows | Extra       |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+-------+---------------+---------+---------+------+------+-------------+</span></span><br><span class="line"><span class="comment">-- |  1 | SIMPLE      | newuser | range | PRIMARY       | PRIMARY | 8       | NULL |    4 | Using where |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+-------+---------------+---------+---------+------+------+-------------+</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> newuser <span class="keyword">where</span> userId <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+---------------+------+---------+------+------+-------------+</span></span><br><span class="line"><span class="comment">-- | id | select_type | table   | type | possible_keys | key  | key_len | ref  | rows | Extra       |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+---------------+------+---------+------+------+-------------+</span></span><br><span class="line"><span class="comment">-- |  1 | SIMPLE      | newuser | ALL  | PRIMARY       | NULL | NULL    | NULL |    3 | Using where |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+---------------+------+---------+------+------+-------------+</span></span><br></pre></td></tr></table></figure>
<h3 id="2-索引使用规则"><a href="#2-索引使用规则" class="headerlink" title="2. 索引使用规则"></a>2. 索引使用规则</h3><p>当一个表内有多个索引时，如何判断自己的sql是否走到了索引，走的是哪个索引呢？</p>
<p>可以通过 <code>explain</code> 关键字来进行辅助判断，当然在实际写sql时，我们也有必要了解下索引匹配的规则，避免设置了一些冗余的索引，或者写出一些走不到索引的sql</p>
<p>测试的表结构如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">*************************** 1. row ***************************</span><br><span class="line">       Table: newuser</span><br><span class="line">Create Table: CREATE TABLE `newuser` (</span><br><span class="line">  `userId` bigint(20) NOT NULL AUTO_INCREMENT COMMENT <span class="string">'用户id'</span>,</span><br><span class="line">  `username` varchar(30) DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户登录名'</span>,</span><br><span class="line">  `nickname` varchar(30) NOT NULL DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户昵称'</span>,</span><br><span class="line">  `password` varchar(50) DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户登录密码 &amp; 密文根式'</span>,</span><br><span class="line">  `address` text COMMENT <span class="string">'用户地址'</span>,</span><br><span class="line">  `email` varchar(50) NOT NULL DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户邮箱'</span>,</span><br><span class="line">  `phone` bigint(20) NOT NULL DEFAULT <span class="string">'0'</span> COMMENT <span class="string">'用户手机号'</span>,</span><br><span class="line">  `img` varchar(100) DEFAULT <span class="string">''</span> COMMENT <span class="string">'用户头像'</span>,</span><br><span class="line">  `extra` text,</span><br><span class="line">  `isDeleted` tinyint(1) unsigned NOT NULL DEFAULT <span class="string">'0'</span>,</span><br><span class="line">  `created` int(11) NOT NULL,</span><br><span class="line">  `updated` int(11) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`userId`),</span><br><span class="line">  KEY `idx_username` (`username`),</span><br><span class="line">  KEY `idx_nickname_email_phone` (`nickname`,`email`,`phone`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8</span><br></pre></td></tr></table></figure>
<h4 id="a-最左前缀匹配原则"><a href="#a-最左前缀匹配原则" class="headerlink" title="a. 最左前缀匹配原则"></a>a. 最左前缀匹配原则</h4><p>这个主要是针对多列非聚簇索引而言，比如有下面这个索引<code>idx_nickname_email_phone(nickname, email, phone)</code>, nickname 定义在email的前面，那么下面这几个语句对应的情况是</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 走索引</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> newuser <span class="keyword">where</span> nickname=<span class="string">'小灰灰'</span> <span class="keyword">and</span> email=<span class="string">'greywolf@xxx.com'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1. 匹配nickname，可以走索引</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> newuser <span class="keyword">where</span> nickname=<span class="string">'小灰灰'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输出:</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+--------------------+--------------------+---------+-------+------+-----------------------+</span></span><br><span class="line"><span class="comment">-- | id | select_type | table   | type | possible_keys      | key                | key_len | ref   | rows | Extra                 |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+--------------------+--------------------+---------+-------+------+-----------------------+</span></span><br><span class="line"><span class="comment">-- |  1 | SIMPLE      | newuser | ref  | idx_nickname_email | idx_nickname_email | 92      | const |    1 | Using index condition |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+--------------------+--------------------+---------+-------+------+-----------------------+</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 虽然匹配了email, 但是不满足最左匹配，不走索引</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> newuser <span class="keyword">where</span> email=<span class="string">'greywolf@xxx.com'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输出</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+---------------+------+---------+------+------+-------------+</span></span><br><span class="line"><span class="comment">-- | id | select_type | table   | type | possible_keys | key  | key_len | ref  | rows | Extra       |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+---------------+------+---------+------+------+-------------+</span></span><br><span class="line"><span class="comment">-- |  1 | SIMPLE      | newuser | ALL  | NULL          | NULL | NULL    | NULL |    3 | Using where |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+---------------+------+---------+------+------+-------------+</span></span><br></pre></td></tr></table></figure>
<h4 id="b-无法跳过某个列使用后续索引列"><a href="#b-无法跳过某个列使用后续索引列" class="headerlink" title="b. 无法跳过某个列使用后续索引列"></a>b. 无法跳过某个列使用后续索引列</h4><p>即对索引<code>idx_nickname_email_phone(nickname, email, phone)</code>, 如果你的sql中，只有 nickname 和 phone, 那么phone走不到索引，因为不能跳过中间的email走索引</p>
<h4 id="c-范围查询后的列无法使用索引"><a href="#c-范围查询后的列无法使用索引" class="headerlink" title="c. 范围查询后的列无法使用索引"></a>c. 范围查询后的列无法使用索引</h4><p>如 &gt;, &lt;, between, like这种就是范围查询，下面的sql中，email 和phone都无法走到索引，因为nickname使用了范围查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> newuser <span class="keyword">where</span> nickname <span class="keyword">like</span> <span class="string">'小灰%'</span> <span class="keyword">and</span> email=<span class="string">'greywolf@xxx.com'</span> <span class="keyword">and</span> phone=<span class="number">15971112301</span> <span class="keyword">limit</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<h4 id="d-列作为函数参数或表达式的一部分"><a href="#d-列作为函数参数或表达式的一部分" class="headerlink" title="d. 列作为函数参数或表达式的一部分"></a>d. 列作为函数参数或表达式的一部分</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 走不到索引</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> newuser <span class="keyword">where</span> userId+<span class="number">1</span>=<span class="number">2</span> <span class="keyword">limit</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输出</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+---------------+------+---------+------+------+-------------+</span></span><br><span class="line"><span class="comment">-- | id | select_type | table   | type | possible_keys | key  | key_len | ref  | rows | Extra       |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+---------------+------+---------+------+------+-------------+</span></span><br><span class="line"><span class="comment">-- |  1 | SIMPLE      | newuser | ALL  | NULL          | NULL | NULL    | NULL |    3 | Using where |</span></span><br><span class="line"><span class="comment">-- +----+-------------+---------+------+---------------+------+---------+------+------+-------------+</span></span><br></pre></td></tr></table></figure>
<h3 id="3-索引缺点"><a href="#3-索引缺点" class="headerlink" title="3. 索引缺点"></a>3. 索引缺点</h3><ul>
<li>虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件。</li>
<li>建立索引会占用磁盘空间的索引文件。一般情况这个问题不太严重，但如果你在一个大表上创建了多种组合索引，索引文件的会膨胀很快。</li>
</ul>
<h3 id="4-注意事项"><a href="#4-注意事项" class="headerlink" title="4. 注意事项"></a>4. 注意事项</h3><ul>
<li>索引不会包含有NULL值的列</li>
<li>使用短索引</li>
<li>索引列排序<ul>
<li>MySQL查询只使用一个索引，因此如果where子句中已经使用了索引的话，那么order by中的列是不会使用索引的。因此数据库默认排序可以符合要求的情况下不要使用排序操作；尽量不要包含多个列的排序，如果需要最好给这些列创建复合索引</li>
</ul>
</li>
<li>like语句操作<ul>
<li>一般情况下不鼓励使用like操作，如果非使用不可，如何使用也是一个问题。like “%aaa%” 不会使用索引而like “aaa%”可以使用索引</li>
</ul>
</li>
<li>不要在列上进行运算<ul>
<li>select * from users where YEAR(adddate)&lt;2007;</li>
</ul>
</li>
<li>尽量不使用NOT IN和&lt;&gt;操作</li>
</ul>
<h3 id="5-sql使用策略"><a href="#5-sql使用策略" class="headerlink" title="5. sql使用策略"></a>5. sql使用策略</h3><h4 id="a-使用一个sql代替多个sql"><a href="#a-使用一个sql代替多个sql" class="headerlink" title="a. 使用一个sql代替多个sql"></a>a. 使用一个sql代替多个sql</h4><p>通常建议是使用一个sql来替代多个sql的查询</p>
<p>当然若sql执行效率很低，或者出现delete等导致锁表的操作时，也可以采用多个sql，避免阻塞其他sql</p>
<h4 id="b-分解关联查询"><a href="#b-分解关联查询" class="headerlink" title="b. 分解关联查询"></a>b. 分解关联查询</h4><p>将关联join尽量放在应用中来做，尽量执行小而简单的的sql</p>
<ul>
<li>分解后的sql简单，利于使用mysql缓存</li>
<li>执行分解后的sql，减少锁竞争</li>
<li>更好的扩展性和维护性（sql简单）</li>
<li>关联sql使用的是内嵌循环算法nestloop，而应用中可以使用hashmap等结构处理数据，效率更高</li>
</ul>
<h4 id="c-count"><a href="#c-count" class="headerlink" title="c. count"></a>c. count</h4><ul>
<li>count(*) 统计的是行数</li>
<li>count(列名) 统计的是列不为null的数量</li>
</ul>
<h4 id="d-limit"><a href="#d-limit" class="headerlink" title="d. limit"></a>d. limit</h4><ul>
<li>limit offset, size; 分页查询，会查询出 offset + size 条数据，获取最后的size条数据</li>
</ul>
<p>如 <code>limit 1000, 20</code> 则会查询出满足条件的1020条数据，然后将最后的20个返回，所以尽量避免大翻页查询</p>
<h4 id="e-union"><a href="#e-union" class="headerlink" title="e. union"></a>e. union</h4><p>需要将where、order by、limit 这些限制放入到每个子查询，才能重分提升效率。另外如非必须，尽量使用Union all，因为union会给每个子查询的临时表加入distinct，对每个临时表做唯一性检查，效率较差。</p>
<h3 id="6-mysql使用查询"><a href="#6-mysql使用查询" class="headerlink" title="6. mysql使用查询"></a>6. mysql使用查询</h3><h4 id="a-查看索引"><a href="#a-查看索引" class="headerlink" title="a. 查看索引"></a>a. 查看索引</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 单位为GB</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="keyword">ROUND</span>(<span class="keyword">SUM</span>(index_length)/(<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>), <span class="number">6</span>), <span class="string">' GB'</span>) <span class="keyword">AS</span> <span class="string">'Total Index Size'</span></span><br><span class="line"><span class="keyword">FROM</span> information_schema.TABLES <span class="keyword">WHERE</span> table_schema <span class="keyword">LIKE</span> <span class="string">'databaseName'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="b-查看表空间"><a href="#b-查看表空间" class="headerlink" title="b. 查看表空间"></a>b. 查看表空间</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="keyword">ROUND</span>(<span class="keyword">SUM</span>(data_length)/(<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>), <span class="number">6</span>), <span class="string">' GB'</span>) <span class="keyword">AS</span> <span class="string">'Total Data Size'</span>   </span><br><span class="line"><span class="keyword">FROM</span> information_schema.TABLES <span class="keyword">WHERE</span> table_schema <span class="keyword">LIKE</span> <span class="string">'databaseName'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="c-查看数据库中所有表的信息"><a href="#c-查看数据库中所有表的信息" class="headerlink" title="c. 查看数据库中所有表的信息"></a>c. 查看数据库中所有表的信息</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(table_schema,<span class="string">'.'</span>,table_name) <span class="keyword">AS</span> <span class="string">'Table Name'</span>,   </span><br><span class="line">    table_rows <span class="keyword">AS</span> <span class="string">'Number of Rows'</span>,   </span><br><span class="line">    <span class="keyword">CONCAT</span>(<span class="keyword">ROUND</span>(data_length/(<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>),<span class="number">6</span>),<span class="string">' G'</span>) <span class="keyword">AS</span> <span class="string">'Data Size'</span>,   </span><br><span class="line">    <span class="keyword">CONCAT</span>(<span class="keyword">ROUND</span>(index_length/(<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>),<span class="number">6</span>),<span class="string">' G'</span>) <span class="keyword">AS</span> <span class="string">'Index Size'</span> ,   </span><br><span class="line">    <span class="keyword">CONCAT</span>(<span class="keyword">ROUND</span>((data_length+index_length)/(<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>),<span class="number">6</span>),<span class="string">' G'</span>) <span class="keyword">AS</span><span class="string">'Total'</span>  </span><br><span class="line"><span class="keyword">FROM</span> information_schema.TABLES   </span><br><span class="line"><span class="keyword">WHERE</span> table_schema <span class="keyword">LIKE</span> <span class="string">'databaseName'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="IV-其他"><a href="#IV-其他" class="headerlink" title="IV. 其他"></a>IV. 其他</h2><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://blog.csdn.net/lemon89/article/details/50193891" target="_blank" rel="noopener">深入理解Mysql——高性能索引与高性能SQL</a></li>
</ul>
<h3 id="个人博客：-一灰灰Blog"><a href="#个人博客：-一灰灰Blog" class="headerlink" title="个人博客： 一灰灰Blog"></a>个人博客： <a href="https://liuyueyi.github.io/hexblog" target="_blank" rel="noopener">一灰灰Blog</a></h3><p>基于hexo + github pages搭建的个人博客，记录所有学习和工作中的博文，欢迎大家前去逛逛</p>
<h3 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h3><p>尽信书则不如，已上内容，纯属一家之言，因本人能力一般，见识有限，如发现bug或者有更好的建议，随时欢迎批评指正</p>
<ul>
<li>微博地址: <a href="https://weibo.com/p/1005052169825577/home" target="_blank" rel="noopener">小灰灰Blog</a></li>
<li>QQ： 一灰灰/3302797840</li>
</ul>
<h3 id="扫描关注"><a href="#扫描关注" class="headerlink" title="扫描关注"></a>扫描关注</h3><p><img src="https://raw.githubusercontent.com/liuyueyi/Source/master/img/info/blogInfoV2.png" alt="QrCode"></p>
</div><div class="tags"><a href="/hexblog/tags/mysql/">mysql</a><a href="/hexblog/tags/索引/">索引</a></div><div style="text-align:center"><br><button style="color:red;background-color: #f44336;border: none;border-radius: 8px;color: white;padding: 10px 30px;text-align: center;text-decoration: none;font-size: 16px;" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">打赏</button><br><span style="display: block;color: #9d9d9d;font: 14px/2 &amp;quot;Microsoft Yahei&amp;quot;">如果觉得我的文章对您有帮助，请随意打赏。</span><br><div id="QR" style="display: none; margin-top: 20px;" class="row"><div id="wechat" style="display: inline-block;width:44%;margin-left:6%;text-align:center;"><a href="javascript:void(0)"><img src="https://s3.mogucdn.com/mlcdn/c45406/180104_50136i33id9e49j1f7k2e219e3ldf_800x798.png" alt="WeChat Pay" style="width:80%;height:80%;max-height:200px;max-width:200px"></a><p style="text-align:center">微信打赏</p></div><div id="alipay" style="display: inline-block;width:44%;text-align:center"><a href="javascript:void(0)"><img src="https://s3.mogucdn.com/mlcdn/c45406/180104_0e6afl33b23lacj6ji2d7d060aiak_798x800.png" alt="Alipay" style="width:80%;height:80%;max-height:200px;max-width:200px"></a><p style="text-align:center">支付宝打赏</p></div></div></div><div class="article-footer-copyright"><url><li>版权声明：本文由<b> 一灰灰 </b><span>发表于</span><a href="/hexblog/"> 一灰灰Blog </a></li><li>转载声明：自由转载-非商用-非衍生-保持署名，非商业转载请注明作者及出处，商业转载请联系作者本人。</li><li id="blogTitleCp">文章标题：<a style="word-wrap:break-word">mysql之索引的工作机制</a></li><li>文章链接：<a id="blogLink" style="word-wrap:break-word"></a><script>var blogLink = decodeURI(window.location.href);
var doc = document.getElementById('blogLink');
doc.setAttribute("href", blogLink);
doc.innerHTML=blogLink;</script></li></url></div><div class="post-share"><div><script src="https://s3.mogucdn.com/mlcdn/c45406/1520387600580_dom-to-image.min.js" charset="utf-8"></script><script>var url;
console.log('start--->',(new Date()).valueOf());
domtoimage.toPng(document.getElementsByClassName('layout-l')[0])
    .then(function (dataUrl) {
        url = dataUrl;
        console.log('end--->',(new Date()).valueOf());
     })
    .catch(function (error) {});
function link() {
    var title = document.getElementById('blogTitleCp').children[0].innerText;
    console.log("blog title: ", title);
    window.open().document.write('<html><head><title>'+ title + '</title></head><body><div style=\'text-align:center\' ><a download="一灰灰Blog博文_' + title + '.png" href="'+url+'"><img title="点击下载博文图：' + title + '" src="' + url + '" /></a></div></body></html>');
}</script><span style="float:center;font-size:20px;font-weight:solid;color:gray">渲染：</span><a id="saveImg" href="javascript:void(0)" onclick="link()" class="save_img">保存图片</a></div><div id="share" class="soshm social-share"><span style="float:center;font-size:20px;font-weight:solid;color:gray">分享：</span></div></div><div class="post-nav"><a href="/hexblog/2018/03/23/mysql之锁与事务详解/" class="pre">mysql之锁与事务详解</a><a href="/hexblog/2018/03/22/mysql基本语法学习小结/" class="next">mysql基本语法学习小结</a></div><div id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zNDY0OC8xMTE4NQ=="></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei"> 文章目录</i><a title="点击展开或隐藏分类" href="javascript:void(0)" onclick="showOrHide('toc', 'toc-expand', 'none')"><span id="toc-expand" style="font-size:12px;color:red"> 点击收起 </span></a></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql之高性能索引"><span class="toc-text">mysql之高性能索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#I-索引介绍"><span class="toc-text">I. 索引介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-几种树的结构"><span class="toc-text">1. 几种树的结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-B-树"><span class="toc-text">a. B+树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-二叉树"><span class="toc-text">b. 二叉树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-平衡二叉树"><span class="toc-text">c. 平衡二叉树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#d-B树"><span class="toc-text">d. B树</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-InnoDB引擎之B-树"><span class="toc-text">2. InnoDB引擎之B+树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-hash索引"><span class="toc-text">3. hash索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-聚集索引与非聚集索引"><span class="toc-text">4. 聚集索引与非聚集索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-聚集索引"><span class="toc-text">a. 聚集索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-非聚集索引"><span class="toc-text">b. 非聚集索引</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-索引的优点"><span class="toc-text">5. 索引的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-适用范围"><span class="toc-text">6. 适用范围</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#II-索引的使用原则"><span class="toc-text">II. 索引的使用原则</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-索引的几个语法"><span class="toc-text">1. 索引的几个语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-索引使用规则"><span class="toc-text">2. 索引使用规则</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-最左前缀匹配原则"><span class="toc-text">a. 最左前缀匹配原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-无法跳过某个列使用后续索引列"><span class="toc-text">b. 无法跳过某个列使用后续索引列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-范围查询后的列无法使用索引"><span class="toc-text">c. 范围查询后的列无法使用索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#d-列作为函数参数或表达式的一部分"><span class="toc-text">d. 列作为函数参数或表达式的一部分</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-索引缺点"><span class="toc-text">3. 索引缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-注意事项"><span class="toc-text">4. 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-sql使用策略"><span class="toc-text">5. sql使用策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-使用一个sql代替多个sql"><span class="toc-text">a. 使用一个sql代替多个sql</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-分解关联查询"><span class="toc-text">b. 分解关联查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-count"><span class="toc-text">c. count</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#d-limit"><span class="toc-text">d. limit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#e-union"><span class="toc-text">e. union</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-mysql使用查询"><span class="toc-text">6. mysql使用查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-查看索引"><span class="toc-text">a. 查看索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-查看表空间"><span class="toc-text">b. 查看表空间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-查看数据库中所有表的信息"><span class="toc-text">c. 查看数据库中所有表的信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IV-其他"><span class="toc-text">IV. 其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#参考"><span class="toc-text">参考</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#个人博客：-一灰灰Blog"><span class="toc-text">个人博客： 一灰灰Blog</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#声明"><span class="toc-text">声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#扫描关注"><span class="toc-text">扫描关注</span></a></li></ol></li></ol></li></ol></div><div class="widget"><div class="widget-title"><a href="/hexblog/about/"><i class="fa fa-user"> 一灰灰Blog</i></a><a title="点击展开或收起条目" href="javascript:void(0)" onclick="showOrHide('info-list', 'info-list-expand', 'none')"><span id="info-list-expand" style="font-size:12px;color:red"> 点击收起 </span></a></div><ul class="post-list info-list"><li style="text-align:center"><img src="//s3.mogucdn.com/mlcdn/c45406/170419_637cgff527i8k9k8h512iaf36cdia_600x600.jpg" style="max-width:80px;radius:80px"/><p style="text-align:center">好好学习，天天搬砖</p><hr style="height:0.1px;border:none;border-top:1px dashed #0066CC;"/></li><li class="post-list-item"><a href="mailto:bangzewu@126.com" title="126邮箱" class="post-list-link"><i class="fa fa-email">  bangzewu@126.com</i></a></li><li class="post-list-item"><a href="//github.com/liuyueyi" title="Git主页" target="_blank" class="post-list-link"><i class="fa fa-github">  github.com/liuyueyi</i></a></li><li class="post-list-item"><a href="" title="QQ" class="post-list-link"><i class="fa fa-you">  QQ:3302797840</i></a></li><li class="post-list-item"><a href="//weibo.com/p/1005052169825577/home" title="微博主页" target="_blank" class="post-list-link"><i class="fa fa-weibo">  微博:小灰灰Blog</i></a></li><li class="post-list-item"><i class="fa fa-weixin">  微信公众号</i></li><li style="text-align:center" class="post-list-item"><img src="https://s10.mogucdn.com/mlcdn/c45406/171229_1cgld3igbelkbc70cd8af1j3809kb_150x150.jpg"/></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章(10)</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/24/redis安装/">redis安装</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/18/18年4月18日离杭小记/">18年4月18日离杭小记</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/17/Java-借助ImageMagic实现图片编辑服务/">Java 借助ImageMagic实现图片编辑服务</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/16/CSS图片点击拷贝/">CSS图片点击拷贝</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/13/生产环境分库分表的实际操作全记录/">生产环境分库分表的实际操作全记录</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/11/Mybatis框架学习之使用篇二：标签语法/">Mybatis框架学习之使用篇二：标签语法</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/11/Mybatis框架学习之使用篇一：基本环境/">Mybatis框架学习之使用篇一：基本环境</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/10/Java实现邮件发送/">Java实现邮件发送</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/09/基于ForkJoin构建一个简单易用的并发组件/">基于ForkJoin构建一个简单易用的并发组件</a></li><li class="post-list-item"><a class="post-list-link" href="/hexblog/2018/04/01/Css实战训练之图片点击放大/">Css实战训练之图片点击放大</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类(63)</i><a title="点击展开或隐藏分类" href="javascript:void(0)" onclick="showOrHide('category-list-child', 'category-expand', 'block')"><span id="category-expand" style="font-size:12px;color:red"> 点击展开 </span></a></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/工作/">工作</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/工作/分库分表/">分库分表</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/工作/技术尝鲜/">技术尝鲜</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/">技术</a><span class="category-list-count">52</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Android/">Android</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Android/一封/">一封</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/BugFix/">BugFix</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/BugFix/Java/">Java</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/BugFix/Java/Image/">Image</a><span class="category-list-count">2</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/DB/">DB</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/DB/Mybatis/">Mybatis</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/DB/Mysql/">Mysql</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Java/">Java</a><span class="category-list-count">19</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Java/IO/">IO</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Java/JDK/">JDK</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Java/JVM/">JVM</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Java/JavaWeb/">JavaWeb</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Java/Spring/">Spring</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Java/并发/">并发</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Quick系列项目/">Quick系列项目</a><span class="category-list-count">12</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Quick系列项目/QuickAlarm/">QuickAlarm</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Quick系列项目/QuickMedia/">QuickMedia</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Quick系列项目/QuickSpi/">QuickSpi</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Shell/">Shell</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Shell/Git/">Git</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Shell/Git/Maven/">Maven</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Shell/Nginx/">Nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/Shell/环境搭建/">环境搭建</a><span class="category-list-count">5</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/前端/">前端</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/前端/Chrome/">Chrome</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/前端/Css/">Css</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/技术/前端/Jquery/">Jquery</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/杂记/">杂记</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/杂记/idea/">idea</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/杂记/吐槽/">吐槽</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/杂记/小工具/">小工具</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/生活/">生活</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/hexblog/categories/生活/随笔/">随笔</a><span class="category-list-count">2</span></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签墙(63)</i><a title="点击展开或隐藏分类" href="javascript:void(0)" onclick="showOrHide('tagcloud', 'tag-expand', 'none')"><span id="tag-expand" style="font-size:12px;color:red"> 点击收起 </span></a></div><div class="tagcloud"><!--!= tagcloud({min_font: 15, max_font: 15, amount: 100, orderby: 'count'})--><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Initialize/">Initialize</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/JVM/">JVM</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/小记/">小记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/日记/">日记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Android/">Android</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/一封/">一封</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/RelativeLayout/">RelativeLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/CountDownTimer/">CountDownTimer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Bugfix/">Bugfix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Java/">Java</a><span class="tag-list-count">34</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/batik/">batik</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Png/">Png</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/拷贝/">拷贝</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Gitbook/">Gitbook</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Centos/">Centos</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/教程/">教程</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Hexo/">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Chrome/">Chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/工具/">工具</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/css/">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/笔记/">笔记</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/并发/">并发</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/ForkJoin/">ForkJoin</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Reflect/">Reflect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Jquery/">Jquery</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/ClassLoader/">ClassLoader</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/双亲委托/">双亲委托</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/内存结构/">内存结构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/垃圾回收/">垃圾回收</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/ImageMagic/">ImageMagic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/JavaWeb/">JavaWeb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Filter/">Filter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Servlet/">Servlet</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/JDK/">JDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/File/">File</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/ScheduledExecutorService/">ScheduledExecutorService</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/IO/">IO</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/clone/">clone</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/beancopy/">beancopy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Email/">Email</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/ThreadPoolExecutor/">ThreadPoolExecutor</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/mybatis/">mybatis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Nginx/">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/配置/">配置</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Redis/">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/distributeLock/">distributeLock</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/SPI/">SPI</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/整体设计/">整体设计</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/使用手册/">使用手册</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Spring/">Spring</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/RequestParam/">RequestParam</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Jsonp/">Jsonp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/CORS/">CORS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Exception/">Exception</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Response/">Response</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/ffmpeg/">ffmpeg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/imagemagic/">imagemagic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/mysql/">mysql</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/索引/">索引</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/锁/">锁</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/事务/">事务</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/redis/">redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Github/">Github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Maven/">Maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/BugFix/">BugFix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/BufferedImage/">BufferedImage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Jpeg/">Jpeg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/杂记/">杂记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/Okhttp/">Okhttp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/QuickAlarm/">QuickAlarm</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/hystrix/">hystrix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/分库分表/">分库分表</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/hexblog/tags/随笔/">随笔</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档(63)</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2018/04/">四月 2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2018/03/">三月 2018</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2018/02/">二月 2018</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2018/01/">一月 2018</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2017/12/">十二月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2017/08/">八月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/hexblog/archives/2017/05/">五月 2017</a><span class="archive-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 更多链接</i></div><ul style="padding-top:10px"></ul><li style="padding-top:2px"><a href="//my.oschina.net/u/566591" title="开源中国" target="_blank">开源中国</a></li><li style="padding-top:2px"><a href="//blog.csdn.net/liuyueyi25" title="CSDN" target="_blank">CSDN</a></li><li style="padding-top:2px"><a href="//www.jianshu.com/u/5902ab08e670" title="简书" target="_blank">简书</a></li><li style="padding-top:2px"><a href="//juejin.im/user/5a2a4b095188252ae93adbbf/posts" title="掘金" target="_blank">掘金</a></li><li style="padding-top:2px"><a href="//www.toutiao.com/c/user/69862071663/#mid=1579653107239950" title="头条" target="_blank">头条</a></li><li style="padding-top:2px"><a href="//cloud.tencent.com/developer/column/1847" title="云+" target="_blank">云+</a></li><li style="padding-top:2px"><a href="//github.com/liuyueyi" title="Github" target="_blank">Github</a></li><li style="padding-top:2px"><a href="//gitee.com/liuyueyi" title="Gitee" target="_blank">Gitee</a></li></div><div class="widget"><div class="widget-title"><i onclick="var qr = document.getElementById('qrcode'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}" style="cursor:pointer" class="fa fa-hit"> 点赞(点击展开)</i></div><ul id="qrcode" style="display:none;" class="post-list"><br/><li style="text-align:center" class="post-list-item"><a href="javascript:void(0)" target="_blank"><img src="https://s3.mogucdn.com/mlcdn/c45406/180104_50136i33id9e49j1f7k2e219e3ldf_800x798.png" alt="WeChat Pay" style="width:75%"/><br/><p style="text-align:center">微信打赏</p></a></li><li style="text-align:center" class="post-list-item"><a href="javascript:void(0)" target="_blank"><img src="https://s3.mogucdn.com/mlcdn/c45406/180104_0e6afl33b23lacj6ji2d7d060aiak_798x800.png" alt="Alipay" style="width:75%"/><br/><p style="text-align:center">支付宝打赏</p></a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="render"><script src="https://s3.mogucdn.com/mlcdn/c45406/1520387600580_dom-to-image.min.js" charset="utf-8"></script><div class="rInput"><input id="choose-id" type="text" placeholder="cid: | id: + 标签" onkeydown="if(event.keyCode==13) {doRender();}"></div><div class="rSendBtn"><a id="rImgBtn" onclick="doRender()">渲染</a></div></div><script type="text/javascript" src="/hexblog/js/render.js?v=2.0.1" async></script><div id="footer"><div class="footer-info"><p><a href="https://zbang.online/webs"><img src="//s3.mogucdn.com/mlcdn/c45406/170419_637cgff527i8k9k8h512iaf36cdia_600x600.jpg" style="max-width: 44px;border-radius:44px"></a></p><p><a href="https://github.com/liuyueyi" target="_blank">GitHub</a> |  <a href="mailto:bangzewu@126.com">email</a> |  <a href="/hexblog/about/">关于 |</a><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p></p><p><span> Copyright &copy;<a href="/hexblog/." rel="nofollow">YiHui.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?028d9e53f991d9739ecc7cc42e13c500";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/hexblog/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/hexblog/js/toctotop.js?v=2.0.1" async></script><script src="https://s3.mogucdn.com/mlcdn/c45406/1520407228303_social-share.min.js" charset="utf-8"></script><link rel="stylesheet" href="https://s3.mogucdn.com/mlcdn/c45406/1518422561591_share.min.css"><script>(function(d, s) {
  var j, e = d.getElementsByTagName('body')[0];
  if (typeof LivereTower === 'function') { return; }
  j = d.createElement(s);
  j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
  j.async = true;
  e.appendChild(j);
})(document, 'script');
</script></body><script type="text/javascript" src="/hexblog/js/common.js?v=2.0.1" async></script></html>